package me.coolmint.ngm.features.modules.exploit;

import com.google.common.eventbus.Subscribe;
import me.coolmint.ngm.event.impl.PacketEvent;
import me.coolmint.ngm.features.modules.Module;
import me.coolmint.ngm.features.settings.Setting;
import me.coolmint.ngm.mixin.IExplosionS2CPacket;
import net.minecraft.network.packet.s2c.play.ExplosionS2CPacket;
import net.minecraft.util.math.BlockPos;

public class WindChargeExploit extends Module {
    private final Setting<Integer> velocity = register(new Setting<>("Velocity", 800, 100, 1500, "Exploit Height"));

    public WindChargeExploit() {
        super("WindChargeExploit", "works on non anticheat server", Category.EXPLOIT, true, false, false);
    }

    boolean isWorking = false;
    private final BlockPos.Mutable bp = new BlockPos.Mutable();

    @Subscribe
    public void onPacketReceive(PacketEvent.Receive e) {
        if (e.getPacket() instanceof ExplosionS2CPacket explosion) {
            ((IExplosionS2CPacket) explosion).setMotionY(((IExplosionS2CPacket) explosion).getMotionY() * velocity.getValue() / 100f);
        }
    }
}